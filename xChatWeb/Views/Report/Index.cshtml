@model xChatWeb.Models.VMReportFilter

@{
    ViewBag.Title = "Index";
}

@{
    var marketList = new List<SelectListItem>();

    foreach (var list in (List<xChatEntities.EntityMaster>)ViewBag.ListMarket)
    {
        marketList.Add(new SelectListItem() { Text = list.EntityMasterName, Value = list.EntityMasterId });
    }

}

<h2>Report Main</h2>

<hr />

<div class="container-fluid row" style="height:85%">

    <div class="col-md-3">
        @using (Ajax.BeginForm("ExecuteReport", new AjaxOptions()
        {
            HttpMethod = "POST",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "tblReport",
            LoadingElementId = "loading"
        }))
        {
            <div class="card">
                <div class="card-header">
                    @Html.LabelFor(model => model.TituloFiltro, htmlAttributes: new { @class = "control-label" })
                </div>
                <div class="card-body">
                    <div>
                        @*Filtro Mercado.*@
                        <div class="form-group">
                            @Html.LabelFor(model => model.MarketId, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.DropDownListFor(model => model.MarketId, marketList, new { @class = "form-control" })
                            </div>
                        </div>

                        @*@*Filtro Fecha Inicio.*@
                        <div class="form-group">
                            @Html.LabelFor(model => model.ConversationDateStart, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.ConversationDateStart, new { htmlAttributes = new { @class = "form-control" } })
                                @*@Html.ValidationMessageFor(model => model.ConversationDateStart, "", new { @class = "form-control" })*@
                            </div>
                        </div>

                        @*Filtro Fecha Final.*@
                        <div class="form-group">
                            @Html.LabelFor(model => model.ConversationDateEnd, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.ConversationDateEnd, new { htmlAttributes = new { @class = "form-control" } })
                                @*@Html.ValidationMessageFor(model => model.ConversationDateEnd, "", new { @class = "form-control" })*@
                            </div>
                        </div>

                        @*Aplicar.*@
                        <div class="form-group">
                            <div>
                                <input type="submit" value="Apply" class="btn btn-primary" />
                            </div>
                        </div>
                    </div>
                    @*<a href="#" class="btn btn-primary">Go somewhere</a>*@
                </div>
            </div>
        }

        <img src="~/Content/Imagenes/Loading_1.gif" style="display:none" id="loading" />

    </div>

    <div class="col-md-4 w-100" id="tblReport">


    </div>

    <div class="col-md-5" id="divConversation">

    </div>

</div>

@*<div id="divConversation">

</div>*@


@section scripts{

    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>



}

